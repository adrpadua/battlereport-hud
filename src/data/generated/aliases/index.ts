// AUTO-GENERATED FILE - DO NOT EDIT
// Generated by scripts/generate-unit-aliases.ts

type AliasMap = Map<string, string>;

interface AliasFile {
  factionId: string;
  factionName: string;
  generatedAt: string;
  aliases: Record<string, string[]>;
}

// Cache for loaded alias files
const aliasCache = new Map<string, AliasFile>();

/**
 * Load aliases for a specific faction.
 */
export async function loadFactionAliasFile(factionId: string): Promise<AliasFile | null> {
  if (aliasCache.has(factionId)) {
    return aliasCache.get(factionId)!;
  }

  try {
    const data = await import(`./${factionId}-aliases.json`);
    const aliasFile = data.default as AliasFile;
    aliasCache.set(factionId, aliasFile);
    return aliasFile;
  } catch {
    // Alias file not generated yet for this faction
    return null;
  }
}

/**
 * Get flattened alias map for a faction (alias -> canonical name).
 */
export async function getFactionAliases(factionId: string): Promise<AliasMap> {
  const aliasFile = await loadFactionAliasFile(factionId);
  if (!aliasFile) {
    return new Map();
  }

  const map = new Map<string, string>();
  for (const [canonicalName, aliases] of Object.entries(aliasFile.aliases)) {
    for (const alias of aliases) {
      map.set(alias.toLowerCase(), canonicalName);
    }
  }
  return map;
}

/**
 * Get combined aliases for multiple factions.
 */
export async function getMultiFactionAliases(factionIds: string[]): Promise<AliasMap> {
  const combined = new Map<string, string>();

  for (const factionId of factionIds) {
    const factionAliases = await getFactionAliases(factionId);
    for (const [alias, canonical] of factionAliases) {
      combined.set(alias, canonical);
    }
  }

  return combined;
}

/**
 * Get all available faction IDs with alias files.
 */
export function getAvailableFactionIds(): string[] {
  return ["adepta-sororitas","adeptus-custodes","adeptus-mechanicus","adeptus-titanicus","agents-of-the-imperium","astra-militarum","black-templars","blood-angels","chaos-daemons","chaos-knights","chaos-space-marines","craftworlds","dark-angels","death-guard","deathwatch","drukhari","emperor-s-children","genestealer-cults","grey-knights","imperial-fists","imperial-knights","iron-hands","leagues-of-votann","library-titans","library-tyranids","necrons","orks","raven-guard","salamanders","space-marines","space-wolves","t-au-empire","thousand-sons","titanicus-traitoris","tyranids","ultramarines","unaligned-forces","white-scars","world-eaters","ynnari"];
}